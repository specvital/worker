---
title: Go λ°±μ—”λ“ μ–Έμ–΄
description: κΈ°μ΅΄ μ„λΉ„μ¤μ™€μ κΈ°μ  μ¤νƒ ν†µν•©μ„ μ„ν• Go λ°±μ—”λ“ μ–Έμ–΄ μ„ νƒ
---

# ADR-01: λ°±μ—”λ“ μ–Έμ–΄λ΅ Go μ„ νƒ

> π‡Ίπ‡Έ [English Version](/en/adr/web/01-go-backend-language.md)

| λ‚ μ§       | μ‘μ„±μ       | λ¦¬ν¬μ§€ν† λ¦¬ |
| ---------- | ------------ | ---------- |
| 2024-12-18 | @KubrickCode | web        |

## Context

### μ–Έμ–΄ μ„ νƒ λ¬Έμ 

μ›Ή ν”λ«νΌμ€ λ°±μ—”λ“ μ–Έμ–΄ μ„ νƒμ΄ ν•„μ”ν–μ. λ‘ κ°€μ§€ μ£Όμ” ν›„λ³΄κ°€ μμ—μ:

1. **Go**: κΈ°μ΅΄ workerμ™€ core μ„λΉ„μ¤μ™€ μΌμΉ
2. **NestJS (TypeScript)**: Next.js ν”„λ΅ νΈμ—”λ“μ™€ μΌμΉ

### κΈ°μ΅΄ μ•„ν‚¤ν…μ²

μ‹μ¤ν…μ€ μ΄λ―Έ λ‹¤μμ—μ„ Goλ¥Ό μ‚¬μ© μ¤‘μ΄μ—μ:

- **Core λΌμ΄λΈλ¬λ¦¬**: νμ„ μ—”μ§„, crypto μ ν‹Έλ¦¬ν‹°, λ„λ©”μΈ λ¨λΈ
- **Worker μ„λΉ„μ¤**: Riverλ¥Ό ν†µν• λ¶„μ„ μ‘μ—… μ²λ¦¬ λ°±κ·ΈλΌμ΄λ“ μ›μ»¤
- **κ³µμ  μΈν”„λΌ**: PostgreSQL κΈ°λ° νƒμ¤ν¬ ν (River)

### ν•µμ‹¬ κ³ λ ¤μ‚¬ν•­

μ›Ή λ°±μ—”λ“λ” λ‹¤μμ΄ ν•„μ”ν–μ:

- worker μ²λ¦¬λ¥Ό μ„ν• λ¶„μ„ νƒμ¤ν¬ enqueue
- workerμ™€μ μ•”νΈν™” μ‘μ—… κ³µμ  (OAuth ν† ν° μ•”νΈν™”)
- ν•„μ”μ‹ core λΌμ΄λΈλ¬λ¦¬ κΈ°λ¥ μ ‘κ·Ό

## Decision

**κΈ°μ΅΄ μ„λΉ„μ¤μ™€μ κΈ°μ  μ¤νƒ ν†µν•©μ„ κ·Ήλ€ν™”ν•κΈ° μ„ν•΄ Goλ¥Ό μ›Ή λ°±μ—”λ“ μ–Έμ–΄λ΅ μ±„νƒν•¨.**

ν•µμ‹¬ μ›μΉ™:

1. **λ‹¨μΌ ν μ‹μ¤ν…**: workerμ™€ River κ³µμ  (λ³„λ„ BullMQ λ¶ν•„μ”)
2. **μ§μ ‘ λΌμ΄λΈλ¬λ¦¬ μ ‘κ·Ό**: RPC μ¤λ²„ν—¤λ“ μ—†μ΄ core λΌμ΄λΈλ¬λ¦¬ import
3. **ν†µν•© λ„κµ¬**: λ‹¨μΌ μ–Έμ–΄ CI/CD, λ¨λ‹ν„°λ§, λ°°ν¬
4. **μ•”νΈν™” κ³µμ **: OAuth ν† ν°μ— λ€ν•΄ λ™μΌν• μ•”νΈν™”/λ³µνΈν™”

## Options Considered

### Option A: Go λ°±μ—”λ“ (μ„ νƒλ¨)

**μ‘λ™ λ°©μ‹:**

- Go HTTP μ„λ²„ (Chi/Gin/Echo)κ°€ REST API μ κ³µ
- `github.com/specvital/core` ν¨ν‚¤μ§€ μ§μ ‘ import
- νƒμ¤ν¬ enqueueλ¥Ό μ„ν• κ³µμ  River ν΄λΌμ΄μ–ΈνΈ
- workerμ™€ λ™μΌν• PostgreSQL μΈμ¤ν„΄μ¤

**μ¥μ :**

- **ν†µν•© μ¤λ²„ν—¤λ“ μ—†μ**: core λΌμ΄λΈλ¬λ¦¬ μ§μ ‘ import
- **κ³µμ  ν μΈν”„λΌ**: λ‹¨μΌ PostgreSQL μΈμ¤ν„΄μ¤, ν†µν•© River ν”„λ΅ν† μ½
- **μΌκ΄€λ μ•”νΈν™”**: μ„λΉ„μ¤ κ°„ λ™μΌν• μ•”νΈν™”
- **μ΄μ λ‹¨μμ„±**: κ΄€λ¦¬ν•  μ–Έμ–΄ λ°νƒ€μ„μ΄ ν•λ‚
- **λ¦¬μ†μ¤ ν¨μ¨μ„±**: Node.jsλ³΄λ‹¤ λ‚®μ€ λ©”λ¨λ¦¬ μ‚¬μ©λ‰

**λ‹¨μ :**

- ν”„λ΅ νΈμ—”λ“ κ°λ°μκ°€ Go κΈ°μ΄λ¥Ό λ°°μ›μ•Ό ν•¨
- npmμ— λΉ„ν•΄ μ‘μ€ μƒνƒκ³„
- TypeScript ν”„λ΅ νΈμ—”λ“μ™€ νƒ€μ… κ³µμ  λ¶κ°€

### Option B: NestJS + TypeScript

**μ‘λ™ λ°©μ‹:**

- TypeScript κΈ°λ° NestJS ν”„λ μ„μ›ν¬
- νƒμ¤ν¬ νλ΅ BullMQ (Riverμ™€ λ³„λ„)
- gRPC λνΌ λλ” TypeScript μ¬μ‘μ„±μ„ ν†µν• core λΌμ΄λΈλ¬λ¦¬ μ ‘κ·Ό

**μ¥μ :**

- Next.js ν”„λ΅ νΈμ—”λ“μ™€ μ–Έμ–΄ κ³µμ 
- λ” ν° ν¨ν‚¤μ§€ μƒνƒκ³„ (npm)
- ν”„λ΅ νΈμ—”λ“μ™€ λ°±μ—”λ“ κ°„ νƒ€μ… κ³µμ 

**λ‹¨μ :**

- **Core λΌμ΄λΈλ¬λ¦¬ λΉ„νΈν™**: Go coreλ¥Ό μ§μ ‘ μ‚¬μ© λ¶κ°€
- **μ΄μ¤‘ ν μ‹μ¤ν…**: BullMQ (web) + River (worker) = λ³µμ΅ν• λΈλ¦Ώμ§•
- **μ•”νΈν™” μ¬κµ¬ν„**: NaCl μ•”νΈν™”λ¥Ό TypeScriptλ΅ μ¬μ‘μ„± ν•„μ”
- **μ΄μ λ³µμ΅μ„±**: λ‘ μ–Έμ–΄ λ°νƒ€μ„, λ³„λ„ CI/CD

### Option C: NestJS BFF + Go Core API

**μ‘λ™ λ°©μ‹:**

- NestJSλ¥Ό Backend-for-Frontend λ μ΄μ–΄λ΅
- core λΌμ΄λΈλ¬λ¦¬λ¥Ό λν•‘ν•λ” Go μ„λΉ„μ¤
- λ μ΄μ–΄ κ°„ gRPC ν†µμ‹ 

**ν‰κ°€:**

- 3λ‹¨κ³„ λ μ΄ν„΄μ‹ μ¤λ²„ν—¤λ“
- λ³µμ΅ν• λ°°ν¬ ν† ν΄λ΅μ§€
- ν„μ¬ κ·λ¨μ— κ³Όλ„ν• μµμ ν™”
- **κΈ°κ°**: μ”κµ¬μ‚¬ν•­ λ€λΉ„ κ³Όμ‰

## Implementation Considerations

### Core λΌμ΄λΈλ¬λ¦¬ ν†µν•©

```
Web Service (Go)                    Worker (Go)
      β”‚                                   β”‚
      β””β”€β”€β”€ import core/pkg/crypto β”€β”€β”€β”€β”€β”€β”€β”€β”
      β”‚                                   β”‚
      β””β”€β”€β”€ import core/pkg/domain β”€β”€β”€β”€β”€β”€β”€β”€β”
```

κ³µμ λλ” ν•µμ‹¬ ν¨ν‚¤μ§€:

- `core/pkg/crypto`: OAuth ν† ν°μ© NaCl SecretBox μ•”νΈν™”
- `core/pkg/domain`: νƒ€μ… μ•μ „ λ„λ©”μΈ λ¨λΈ

### ν μ•„ν‚¤ν…μ²

```
Web (Producer)    PostgreSQL (NeonDB)      Worker (Consumer)
      β”‚                       β”‚                        β”‚
      β”β”€ river.Insert() β”€β”€β”€β”€β†’ task_queue β”€β”€β”€β”€β†’ river.Work()
      β”‚                       β”‚                        β”‚
      β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€ shared River protocol β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

μ΄μ :

- λ‹¨μΌ PostgreSQL μΈμ¤ν„΄μ¤ (λΉ„μ© μ κ°)
- νƒ€μ… μ•μ „ νƒμ¤ν¬ νμ΄λ΅λ“
- λ‚΄μ¥ μ¬μ‹λ„, μ¤μΌ€μ¤„λ§, dead-letter queue

### μ•”νΈν™” κ³µμ 

OAuth ν”λ΅μ° μ”κµ¬μ‚¬ν•­:

1. Webμ΄ DB μ €μ¥ μ „ GitHub ν† ν° μ•”νΈν™”
2. Workerκ°€ GitHub API μ ‘κ·Ό μ‹ ν† ν° λ³µνΈν™”

Go μ‚¬μ© μ‹:

- λ™μΌν• `crypto.Encryptor` μΈν„°νμ΄μ¤
- λ™μΌν• μ•”νΈν™” ν‚¤ (ν™κ²½ λ³€μ)
- νΈν™μ„± λ³΄μ¥

NestJS μ‚¬μ© μ‹:

- TypeScriptλ΅ NaCl SecretBox μ¬κµ¬ν„ ν•„μ”
- λ―Έλ¬ν• μ•”νΈν™” λΉ„νΈν™ μ„ν—
- μ¶”κ°€ ν…μ¤νΈ λ¶€λ‹΄

## Consequences

### Positive

**μΈν”„λΌ ν¨μ¨μ„±:**

- λ‹¨μΌ PostgreSQL μΈμ¤ν„΄μ¤κ°€ webκ³Ό worker λ¨λ‘ μ§€μ›
- ν†µν•© λ¨λ‹ν„°λ§ λ° μ•λ¦Ό
- κ³µμ  λ°°ν¬ ν¨ν„΄

**κ°λ° μ†λ„:**

- webκ³Ό core κ°„ μ§λ ¬ν™” λ μ΄μ–΄ μ—†μ
- μ„λΉ„μ¤ κ°„ μ»΄νμΌ νƒ€μ„ νƒ€μ… μ•μ „μ„±
- μΌκ΄€λ μ—λ¬ μ²λ¦¬ ν¨ν„΄

**μ΄μ λ‹¨μμ„±:**

- λ°±μ—”λ“ μ„λΉ„μ¤μ— λ‹¨μΌ μ–Έμ–΄
- λ‹¨μΌ CI/CD νμ΄ν”„λΌμΈ ν¨ν„΄
- ν†µν•© μμ΅΄μ„± κ΄€λ¦¬ (go.mod)

### Negative

**ν•™μµ κ³΅μ„ :**

- ν”„λ΅ νΈμ—”λ“ κ°λ°μκ°€ Goμ— μµμ™ν•΄μ Έμ•Ό ν•¨
- **μ™„ν™”μ±…**: μ§‘μ¤‘ κµμ΅, νμ–΄ ν”„λ΅κ·Έλλ°

**νƒ€μ… κ³µμ :**

- ν”„λ΅ νΈμ—”λ“μ© μλ™ νƒ€μ… μƒμ„± λ¶κ°€
- **μ™„ν™”μ±…**: TypeScript ν΄λΌμ΄μ–ΈνΈμ© OpenAPI codegen

**μƒνƒκ³„:**

- npmλ³΄λ‹¤ μ μ€ ν¨ν‚¤μ§€
- **μ™„ν™”μ±…**: κΈ°λ¥ μ‹μ‘ μ „ λ€μ• ν‰κ°€

## References

- [ADR-04: ν κΈ°λ° λΉ„λ™κΈ° μ²λ¦¬](/ko/adr/04-queue-based-async-processing.md)
- [ADR-07: κ³µμ  μΈν”„λΌ μ „λµ](/ko/adr/07-shared-infrastructure.md)
- [Core ADR-01: μ½”μ–΄ λΌμ΄λΈλ¬λ¦¬ λ¶„λ¦¬](/ko/adr/core/01-core-library-separation.md)
