---
title: êµ¬ë… ê¸°ê°„ ì¼í•  ê³„ì‚°
description: ê³µì •í•œ ì¿¼í„° í• ë‹¹ì„ ìœ„í•œ ë¡¤ë§ ê¸°ê°„ ê¸°ë°˜ êµ¬ë… ë¹Œë§ ADR
---

# ADR-24: êµ¬ë… ê¸°ê°„ ì¼í•  ê³„ì‚°

> ğŸ‡ºğŸ‡¸ [English Version](/en/adr/web/24-subscription-period-prorata)

| ë‚ ì§œ       | ì‘ì„±ì     | ë ˆí¬ì§€í† ë¦¬ |
| ---------- | ---------- | ---------- |
| 2026-01-16 | @specvital | web        |

## ì»¨í…ìŠ¤íŠ¸

ë‹¬ë ¥ ì›” ê¸°ë°˜ ë¹Œë§ ê¸°ê°„ì€ ì›”ë§ì— ê°€ì…í•œ ì‚¬ìš©ìì—ê²Œ ë¶ˆê³µì •í•œ ì¿¼í„° í• ë‹¹ ë°œìƒ. ì˜ˆë¥¼ ë“¤ì–´, 1ì›” 29ì¼ì— ê°€ì…í•œ ì‚¬ìš©ìëŠ” ì „ì²´ ì›” ì¿¼í„°ë¥¼ ë°›ì§€ë§Œ 2ì›” 1ì¼ì— ë¦¬ì…‹ë˜ì–´ ì‹¤ì œ ì‚¬ìš© ê¸°ê°„ 3ì¼ ë™ì•ˆ 2ê°œì›” ë¶„ëŸ‰ì˜ ì¿¼í„° íšë“.

ì´ ë¬¸ì œëŠ” ë¹Œë§ ì•„í‚¤í…ì²˜ì˜ ê²°ê³¼ë¡œ ì‹ë³„ë˜ì—ˆìœ¼ë©° ê³µì •í•œ ê¸°ê°„ ê³„ì‚° ì „ëµ í•„ìš”.

### ë¬¸ì œ ì‹œë‚˜ë¦¬ì˜¤

| ê°€ì… ë‚ ì§œ | ë‹¬ë ¥ ë¦¬ì…‹ | ì‹¤ì œ ì‚¬ìš© ì¼ìˆ˜ | ë°›ì€ ì¿¼í„° |
| --------- | --------- | -------------- | --------- |
| 1ì›” 1ì¼   | 2ì›” 1ì¼   | 31ì¼           | 1ê°œì›”     |
| 1ì›” 29ì¼  | 2ì›” 1ì¼   | 3ì¼            | 1ê°œì›”     |

29ì¼ì— ê°€ì…í•œ ì‚¬ìš©ìê°€ 1ì¼ì— ê°€ì…í•œ ì‚¬ìš©ìì™€ ë™ì¼í•œ ì¿¼í„°ë¥¼ ë°›ìŒì—ë„ ë¶ˆêµ¬í•˜ê³  ì‚¬ìš© ê¸°ê°„ì€ 10%ì— ë¶ˆê³¼.

### ADR-13ê³¼ì˜ ê´€ê³„

ì´ ADRì€ [ADR-13: ë¹Œë§ ë° ì¿¼í„° ì•„í‚¤í…ì²˜](/ko/adr/13-billing-quota-architecture.md)ë¥¼ í™•ì¥. ADR-13ì€ "ê°€ì…ì¼ ê¸°ì¤€ ë¡¤ë§ ê¸°ê°„"ì„ ì„ íƒëœ ì „ëµìœ¼ë¡œ ì‹ë³„í–ˆìœ¼ë‚˜ êµ¬í˜„ ì„¸ë¶€ì‚¬í•­ì€ ë¯¸ê²°ì •. ADR-13ì€ ë˜í•œ "í”„ë¡œë ˆì´ì…˜ ë³µì¡ì„±: ì¤‘ê°„ ê¸°ê°„ í”Œëœ ë³€ê²½ ì‹œ ì¿¼í„° ì¡°ì • í•„ìš”"ë¥¼ ë¶€ì •ì  ê²°ê³¼ë¡œ ì–¸ê¸‰í•˜ë©° í–¥í›„ ì‘ì—…ìœ¼ë¡œ ë‚¨ê¹€.

## ê²°ì •

**ê° ì‚¬ìš©ìì˜ ê°€ì… íƒ€ì„ìŠ¤íƒ¬í”„ ê¸°ë°˜ ë¡¤ë§ ê¸°ê°„ ê³„ì‚° êµ¬í˜„.**

ê° ì‚¬ìš©ìì˜ ë¹Œë§ ê¸°ê°„ì€ ì‹¤ì œ ê°€ì… ë‚ ì§œì—ì„œ ì‹œì‘í•˜ì—¬ ì •í™•íˆ 1ê°œì›” í›„ ì¢…ë£Œ, ê°€ì… ì‹œì ì— ê´€ê³„ì—†ì´ ëª¨ë“  ì‚¬ìš©ìê°€ ì „ì²´ ì›” ì¿¼í„° ìˆ˜ë ¹ ë³´ì¥.

### êµ¬í˜„

```go
// src/backend/modules/subscription/usecase/assign_default_plan.go
now := time.Now().UTC()
periodStart := now                                       // ê°€ì… íƒ€ì„ìŠ¤íƒ¬í”„
periodEnd := now.AddDate(0, 1, 0).Add(-time.Nanosecond)  // ì •í™•íˆ 1ê°œì›” í›„
```

### í•µì‹¬ ì„¤ê³„ ê²°ì •

| ê²°ì •               | ê·¼ê±°                                                    |
| ------------------ | ------------------------------------------------------- |
| UTC ì •ê·œí™”         | íƒ€ì„ì¡´ ê´€ë ¨ ì—£ì§€ ì¼€ì´ìŠ¤ ë°©ì§€                            |
| `AddDate(0, 1, 0)` | Goì˜ ë‹¬ë ¥ ì›” ì‹œë§¨í‹± ì‚¬ìš© (2ì›” 28ì¼, ìœ¤ë…„ ì˜¬ë°”ë¥´ê²Œ ì²˜ë¦¬) |
| ë‚˜ë…¸ì´ˆ ê°ì‚°        | SQL ë²”ìœ„ ì¿¼ë¦¬ì˜ ë°°íƒ€ì  ìƒí•œ ë³´ì¥                        |
| ì‚¬ìš©ìë³„ ê¸°ê°„ ì¶”ì  | `user_subscriptions` í…Œì´ë¸”ì— ê¸°ê°„ ê²½ê³„ ì €ì¥            |

### ì‚¬ìš©ëŸ‰ ì¿¼ë¦¬ íŒ¨í„´

```sql
SELECT COALESCE(SUM(quota_amount), 0)::bigint AS total
FROM usage_events
WHERE user_id = $1
    AND event_type = $2
    AND created_at >= $3    -- current_period_start (í¬í•¨)
    AND created_at < $4     -- current_period_end (ë°°íƒ€)
```

## ê³ ë ¤í•œ ì˜µì…˜

### ì˜µì…˜ A: ê°€ì…ì¼ ê¸°ì¤€ ë¡¤ë§ ê¸°ê°„ (ì„ íƒë¨)

ì‚¬ìš©ìì˜ ì‹¤ì œ ê°€ì… íƒ€ì„ìŠ¤íƒ¬í”„ì—ì„œ ì‹œì‘í•˜ì—¬ ì •í™•íˆ 1ê°œì›” í›„ ì¢…ë£Œ.

| ì¥ì                                     | ë‹¨ì                       |
| --------------------------------------- | ------------------------- |
| ê°€ì… ì‹œì  ë¬´ê´€í•˜ê²Œ ëª¨ë“  ì‚¬ìš©ìì—ê²Œ ê³µì • | ì‚¬ìš©ìë§ˆë‹¤ ë‹¤ë¥¸ ê°±ì‹  ë‚ ì§œ |
| ì˜ˆì¸¡ ê°€ëŠ¥í•œ ê°±ì‹  ë‚ ì§œ (ì‚¬ìš©ì íŠ¹ì •)     | ë°°ì¹˜ ë³´ê³  ë³µì¡í™”          |
| ì›”ë§ ê°€ì… í˜ë„í‹° ì—†ìŒ                   | ì¤‘ì•™ì§‘ì¤‘ ì²˜ë¦¬ ì°½ ì—†ìŒ     |
| ì›”ë§ ê°€ì…ìœ¼ë¡œ ì‹œìŠ¤í…œ ì•…ìš© ë¶ˆê°€          |                           |

### ì˜µì…˜ B: ë‹¬ë ¥ ì›” ê¸°ê°„

ëª¨ë“  ì‚¬ìš©ìì— ëŒ€í•´ í•­ìƒ ì›” 1ì¼ë¶€í„° ë§ì¼ê¹Œì§€ ê¸°ê°„ ì ìš©.

| ì¥ì              | ë‹¨ì                                         |
| ---------------- | ------------------------------------------- |
| ë‹¨ìˆœ êµ¬í˜„        | ì›”ë§ ê°€ì…ìì—ê²Œ ë¶ˆê³µì • (ìµœëŒ€ 97% ê°€ì¹˜ ì†ì‹¤) |
| ì‰¬ìš´ ë°°ì¹˜ ì²˜ë¦¬   | ì•…ìš© ê°€ëŠ¥ì„± (28ì¼ ê°€ì…, 1ì¼ ë¦¬ì…‹)           |
| ì½”í˜¸íŠ¸ ë¶„ì„ ì •ë ¬ | ë¶ˆê³µì •ì„±ì— ëŒ€í•œ ì‚¬ìš©ì ë¶ˆë§Œ                 |

**ê¸°ê°**: ì‚¬ìš©ì ê³µì •ì„± íŠ¸ë ˆì´ë“œì˜¤í”„ ìˆ˜ìš© ë¶ˆê°€.

### ì˜µì…˜ C: í”„ë¡œë ˆì´íŠ¸ëœ ë‹¬ë ¥ ì›”

ë‹¬ë ¥ ì›” ì •ë ¬ì„ ìœ ì§€í•˜ë˜ ì²« ë‹¬ ë¶€ë¶„ ì¿¼í„°ë¥¼ ë¹„ë¡€ ë°°ë¶„.

| ì¥ì             | ë‹¨ì                    |
| --------------- | ---------------------- |
| ë‹¬ë ¥ ì •ë ¬ ìœ ì§€  | ë³µì¡í•œ ë¶€ë¶„ ê³„ì‚°       |
| ìˆ˜í•™ì ìœ¼ë¡œ ê³µì • | ì‚¬ìš©ìì—ê²Œ ì„¤ëª… ì–´ë ¤ì›€ |
|                 | ë¶€ë¶„ ì¿¼í„° UX ë§ˆì°°      |

**ê¸°ê°**: ë³µì¡ì„±ì´ ë‹¬ë ¥ ì •ë ¬ ì´ì  ì´ˆê³¼.

### ì˜µì…˜ D: ê³ ì • ë‚ ì§œ ì•µì»¤ (1ì¼ ë˜ëŠ” 15ì¼)

ì˜ˆì¸¡ ê°€ëŠ¥í•œ ë°°ì¹˜ ì°½ì„ ìœ„í•´ ê°€ì…ì¼ì„ ê°€ì¥ ê°€ê¹Œìš´ ì•µì»¤ ë‚ ì§œë¡œ ë°˜ì˜¬ë¦¼.

| ì¥ì                      | ë‹¨ì                                        |
| ------------------------ | ------------------------------------------ |
| ì˜ˆì¸¡ ê°€ëŠ¥í•œ ë°°ì¹˜ ì²˜ë¦¬ ì°½ | ìµœëŒ€ 14ì¼ ë¶ˆê³µì •                           |
| ë” ë‹¨ìˆœí•œ ë³´ê³            | ì„ì˜ì  ì»·ì˜¤í”„ê°€ ë¶ˆê³µì •í•˜ê²Œ ëŠê»´ì§          |
|                          | ì‚¬ìš©ìê°€ ê°€ì¹˜ ê·¹ëŒ€í™”ë¥¼ ìœ„í•´ ê°€ì… ì§€ì—° ê°€ëŠ¥ |

**ê¸°ê°**: ì„ì˜ì  ë¶ˆê³µì •ì„±ì´ ì‚¬ìš©ì ë¶ˆë§Œì¡± ìœ ë°œ.

## ê²°ê³¼

### ê¸ì •ì 

| ì˜ì—­             | ì´ì                                                         |
| ---------------- | ----------------------------------------------------------- |
| ì‚¬ìš©ì ê³µì •ì„±    | ê°€ì… ì‹œì  ë¬´ê´€í•˜ê²Œ ëª¨ë“  ì‚¬ìš©ìê°€ ì •í™•íˆ 1ê°œì›” ì¿¼í„° ìˆ˜ë ¹     |
| ì˜ˆì¸¡ ê°€ëŠ¥í•œ ê°±ì‹  | ì‚¬ìš©ìê°€ ì •í™•í•œ ê°±ì‹  ë‚ ì§œ ì¸ì§€ (UIì— íŠ¹ì • ë‹¬ë ¥ ë‚ ì§œë¡œ í‘œì‹œ) |
| ì•…ìš© ë°©ì§€        | ì¦‰ì‹œ ë¦¬ì…‹ì„ ìœ„í•œ ì›”ë§ ê°€ì…ìœ¼ë¡œ ì‹œìŠ¤í…œ ì•…ìš© ë¶ˆê°€             |
| ëª…í™•í•œ ê¸°ëŒ€      | UIì— "1ì›” 16ì¼ì— ë¦¬ì…‹"ìœ¼ë¡œ í‘œì‹œ, ëª¨í˜¸í•œ "ì›”ê°„" ëŒ€ì‹          |
| ADR-13 ì •ë ¬      | ìƒìœ„ ADRì— ë¬¸ì„œí™”ëœ ì„ íƒ ì „ëµ ì´í–‰                          |

### ë¶€ì •ì 

| ì˜ì—­            | íŠ¸ë ˆì´ë“œì˜¤í”„                                 | ì™„í™”ì±…                                           |
| --------------- | -------------------------------------------- | ------------------------------------------------ |
| ë°°ì¹˜ ì°½ ì—†ìŒ    | ì‚¬ìš©ìë§ˆë‹¤ ë‹¤ë¥¸ ë‚ ì§œì— ë¦¬ì…‹                  | í˜„ì¬ ê·œëª¨ì—ì„œ ìˆ˜ìš© ê°€ëŠ¥                          |
| ì¸ë³´ì´ìŠ¤ ë³µì¡ì„± | ê²°ì œ ì—°ë™ ì‹œ ì‚¬ìš©ìë³„ ë¹Œë§ ë‚ ì§œ í•„ìš”         | ê²°ì œ ì²˜ë¦¬ í•„ìš” ì‹œ í–¥í›„ ê³ ë ¤                      |
| ì›” ê¸¸ì´ ë³€ë™    | 1ì›” 31ì¼ì´ 2ì›” 28ì¼ë¡œ ë¡¤ (3ì¼ ì†ì‹¤)          | Goì˜ `AddDate`ê°€ ì˜¬ë°”ë¥´ê²Œ ì²˜ë¦¬; ìˆ˜ìš© ê°€ëŠ¥í•œ ë³€ë™ |
| ì¤‘ê°„ ê¸°ê°„ ë³€ê²½  | í”Œëœ ì—…/ë‹¤ìš´ê·¸ë ˆì´ë“œ ì‹œ í”„ë¡œë ˆì´ì…˜ ë¡œì§ í•„ìš” | í–¥í›„ ì‘ì—…ìœ¼ë¡œ ëª…ì‹œì  ì—°ê¸°                        |
| ë³´ê³  ë³µì¡ì„±     | ë¡¤ë§ ê¸°ê°„ì´ ì½”í˜¸íŠ¸ ë¶„ì„ ë³µì¡í™”               | ì‚¬ìš©ì ê³µì •ì„± ìš°ì„ ìœ¼ë¡œ ìˆ˜ìš©                      |

### ì²˜ë¦¬ëœ ì—£ì§€ ì¼€ì´ìŠ¤

| ì—£ì§€ ì¼€ì´ìŠ¤                   | ì²˜ë¦¬ ë°©ë²•                          |
| ----------------------------- | ---------------------------------- |
| ì›” ê²½ê³„ (1ì›” 31ì¼ â†’ 2ì›” 28ì¼) | Go `AddDate` ë‹¬ë ¥ ì‹œë§¨í‹±           |
| ìœ¤ë…„ (2ì›” 29ì¼)               | Go í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì˜¬ë°”ë¥´ê²Œ ì²˜ë¦¬ |
| íƒ€ì„ì¡´ ë³€ë™                   | ì €ì¥ ë ˆì´ì–´ì—ì„œ UTC ì •ê·œí™”         |
| ê²½ê³„ ì •ë°€ë„                   | ë‚˜ë…¸ì´ˆ ì •ë°€ë„ ë°°íƒ€ì  ìƒí•œ          |

## ì—°ê¸°ëœ ê²°ì •

ADR-13ì— ì–¸ê¸‰ëœ ê²°ê³¼ì— ë”°ë¼ ë‹¤ìŒ ì¤‘ê°„ ê¸°ê°„ ì‹œë‚˜ë¦¬ì˜¤ëŠ” ë¯¸êµ¬í˜„ ìƒíƒœ:

| ì‹œë‚˜ë¦¬ì˜¤               | ì œì•ˆëœ ì ‘ê·¼ë²•                                                       | ìƒíƒœ      |
| ---------------------- | ------------------------------------------------------------------- | --------- |
| ì¤‘ê°„ ê¸°ê°„ ì—…ê·¸ë ˆì´ë“œ   | ë¹„ë¡€ ì°¨ì´ ì¶”ê°€: `(newQuota - oldQuota) * remainingDays / totalDays` | í–¥í›„ ì‘ì—… |
| ì¤‘ê°„ ê¸°ê°„ ë‹¤ìš´ê·¸ë ˆì´ë“œ | ì˜µì…˜: ë¯¸ì‚¬ìš©ë¶„ ì´ì›” ë˜ëŠ” ìƒˆ í•œë„ë¡œ ë¦¬ì…‹                             | í–¥í›„ ì‘ì—… |
| í”Œëœ ë§Œë£Œ              | ë¬´ë£Œ í‹°ì–´ë¡œ ê·¸ë ˆì´ìŠ¤í’€ ë””ê·¸ë ˆì´ë°ì´ì…˜                               | í–¥í›„ ì‘ì—… |

## ì°¸ê³  ìë£Œ

- [ADR-13: ë¹Œë§ ë° ì¿¼í„° ì•„í‚¤í…ì²˜](/ko/adr/13-billing-quota-architecture.md)
- [Commit ec64e42](https://github.com/specvital/web/commit/ec64e42) - fix(subscription): fix users getting 2 months quota when signing up late in month
- [Commit b364f51](https://github.com/specvital/web/commit/b364f51) - fix(account): fix awkward grammar in usage reset date display
